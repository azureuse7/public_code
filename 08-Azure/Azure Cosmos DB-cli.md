## **What is Azure Cosmos DB?**
**Azure Cosmos DB** is Microsoft's globally distributed, multi-model database service designed to provide high availability, low latency, and scalability for modern applications. It is a **NoSQL** database service that supports multiple data models, including:

- **Document** (using SQL API)
- **Key-Value**
- **Graph** (using Gremlin API)
- **Column-Family** (using Cassandra API)
- **Table** (using Azure Table Storage API)
### **Key Features of Azure Cosmos DB:**
1. **Global Distribution:**
   1. Replicate your data across any number of Azure regions.
   1. Provides low-latency access to data for users worldwide.
1. **Multiple APIs and Data Models:**
   1. Supports various APIs like SQL, MongoDB, Cassandra, Gremlin, and Table, allowing flexibility in choosing the data model that best fits your application.
1. **Elastic Scalability:**
   1. Automatically scales throughput and storage based on application needs.
   1. Supports both horizontal and vertical scaling.
1. **Guaranteed Low Latency:**
   1. Single-digit millisecond response times at the 99th percentile worldwide.
1. **Comprehensive SLAs:**
   1. Offers industry-leading SLAs for availability, latency, throughput, and consistency.
1. **Five Consistency Models:**
   1. Provides multiple consistency levels to balance between performance and data consistency, ranging from strong to eventual consistency.
1. **Security and Compliance:**
   1. Built-in security features like encryption at rest and in transit.
   1. Compliant with various international standards and regulations.
### **Use Cases:**
- **Real-Time Web and Mobile Applications:** For applications requiring fast access to data across the globe.
- **IoT and Telemetry:** Handling massive amounts of data generated by devices.
- **Gaming:** Managing player data and game state with low latency.
- **Retail and E-commerce:** Ensuring quick access to product catalogs and user information.
-----
## **Example: Using Azure CLI to Create and Manage Azure Cosmos DB**
Below is a step-by-step example demonstrating how to create an Azure Cosmos DB account, create a database and container, and perform basic operations using the Azure CLI in a Bash environment.
### **Prerequisites:**
1. **Azure CLI Installed:** Ensure you have the Azure CLI installed. If not, you can install it from [here](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli).
1. **Azure Subscription:** You need an active Azure subscription. If you don't have one, you can create a free account [here](https://azure.microsoft.com/en-us/free/).
### **Step 1: Log in to Azure**
``` bash
bash

\# Log in to your Azure account

az login
``` 
This command will open a web browser prompting you to enter your Azure credentials.
### **Step 2: Set Variables**
Define variables for resource group, Cosmos DB account, database, and container.
``` bash
bash

Copy code

\# Variables

RESOURCE\_GROUP="MyResourceGroup"

COSMOS\_ACCOUNT="mycosmosdbaccount123"

LOCATION="eastus"

DATABASE\_NAME="MyDatabase"

CONTAINER\_NAME="MyContainer"

PARTITION\_KEY="/myPartitionKey"
``` 
### **Step 3: Create a Resource Group**
A resource group is a container that holds related resources for an Azure solution.
``` bash
bash

Copy code

az group create --name $RESOURCE\_GROUP --location $LOCATION
``` 
### **Step 4: Create an Azure Cosmos DB Account**
Here, we'll create a Cosmos DB account using the SQL (Core) API.
``` bash
bash

Copy code

az cosmosdb create \

`    `--name $COSMOS\_ACCOUNT \

`    `--resource-group $RESOURCE\_GROUP \

`    `--kind GlobalDocumentDB \

`    `--locations regionName=$LOCATION failoverPriority=0 isZoneRedundant=False
```
### **Step 5: Retrieve the Cosmos DB Account's Primary Key**
You'll need the primary key to authenticate and interact with the database.
``` bash
bash

Copy code

COSMOS\_KEY=$(az cosmosdb keys list --name $COSMOS\_ACCOUNT --resource-group $RESOURCE\_GROUP --query "primaryMasterKey" --output tsv)

echo $COSMOS\_KEY
``` 
### **Step 6: Create a Database**
``` bash
bash

Copy code

az cosmosdb sql database create \

`    `--account-name $COSMOS\_ACCOUNT \

`    `--resource-group $RESOURCE\_GROUP \

`    `--name $DATABASE\_NAME
```
### **Step 7: Create a Container**
A container is a schema-agnostic container of items. Here, we define a partition key for scalability.
``` bash
bash

Copy code

az cosmosdb sql container create \

`    `--account-name $COSMOS\_ACCOUNT \

`    `--resource-group $RESOURCE\_GROUP \

`    `--database-name $DATABASE\_NAME \

`    `--name $CONTAINER\_NAME \

`    `--partition-key-path $PARTITION\_KEY \

`    `--throughput 400
```
### **Step 8: Insert a Document into the Container**
You can insert JSON documents into the Cosmos DB container. Here's how to do it using the Azure CLI.

First, create a JSON file named item.json:
``` bash
json

Copy code

{

`    `"id": "1",

`    `"myPartitionKey": "partition1",

`    `"name": "John Doe",

`    `"email": "john.doe@example.com"

}
``` 
Then, insert the document:
``` bash
bash

Copy code

az cosmosdb sql container item create \

`    `--account-name $COSMOS\_ACCOUNT \

`    `--resource-group $RESOURCE\_GROUP \

`    `--database-name $DATABASE\_NAME \

`    `--container-name $CONTAINER\_NAME \

`    `--item @item.json
``` 
### **Step 9: Query Documents in the Container**
Retrieve documents using a SQL query.
``` bash
bash

Copy code

az cosmosdb sql container item query \

`    `--account-name $COSMOS\_ACCOUNT \

`    `--resource-group $RESOURCE\_GROUP \

`    `--database-name $DATABASE\_NAME \

`    `--container-name $CONTAINER\_NAME \

`    `--query-text "SELECT \* FROM c WHERE c.name = 'John Doe'"
```
### **Step 10: Clean Up Resources**
To avoid incurring charges, you can delete the resource group, which deletes all resources within it.
``` bash
bash

Copy code

az group delete --name $RESOURCE\_GROUP --yes --no-wait

-----
## **Summary**
Azure Cosmos DB is a powerful, globally distributed database service that offers multiple data models and APIs to cater to various application needs. Its seamless scalability, low latency, and comprehensive SLAs make it an excellent choice for modern, data-intensive applications.

Using the Azure CLI in a Bash environment, you can efficiently manage your Cosmos DB resources, perform CRUD (Create, Read, Update, Delete) operations, and automate your database workflows. The example provided demonstrates the basic steps to get you started with creating and interacting with an Azure Cosmos DB account.

For more advanced scenarios and detailed configurations, you can refer to the [official Azure Cosmos DB documentation](https://docs.microsoft.com/en-us/azure/cosmos-db/).

